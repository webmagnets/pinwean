<head>
<script src="jquery-3.3.1.min.js"></script>
</head>
<body>
    <div style="text-align:center;">
        <link rel="stylesheet" href="/assets/css/style.css?v=804fb9bdb945fb8ad5027f94f1509e2a592f3bde">
        <image src="https://res.cloudinary.com/slowmersion/image/upload/c_scale,w_256/v1547055108/pinyin-fade.png" />
        <p>
            <h1 style="color:#838383;">Gently Wean Yourself From Pinyin</h1>
        </p>
    </div>
    <div>
        <p>On any Chinese webpage see the pinyin for only the characters/words you don't know. Tap to see the
            definition. Pinwean will keep track of what you know and what you don't know.</p>
        <p>Works on PC, MacOS, iOS, Android, etc. All browsers.</p>

        <p><a href="#install">Install</a></p>

        <h2 id="use">How to use the Pinwean bookmarklet</h2>
        <ol>
            <li>Go to any webpage written in Chinese.</li>
            <li>If you want to read the whole page then just click the Pinwean bookmark and wait.</li>
            <li>If you want to only read a portion of the page, select the Chinese text you want to convert and then
                click the Pinwean bookmark and wait.</li>
            <li>When the conversion is finished you just start reading. If you don't know a character/word then just
                click to see the pinyin. If you still don't know the word after revealing the pinyin, then click it
                again to see the definition.</li>
            <li>You should read Chinese everyday to increase your vocabulary and assimilate the grammar.</li>
            <li>Note: If you want to follow a link, please click on the word "(link)" beside the original link. This
                allows you to click on the original link to see the pinyin or definition.</li>
        </ol>

        <h3 id="install">How to install the Pinwean <a target="_blank" href="https://www.howtogeek.com/189358/beginner-geek-how-to-use-bookmarklets-on-any-device/">bookmarklet</a></h3>
        <ol>
            <li>Bookmark the web page you are on right now. (Best to save the bookmark somewhere it is easy to find. We
                are going to edit it later.)</li>
            <li>Fill out this form to get your customized javascript code:</li>
            
            <li>Email: <input type="email" id='email' required></li>
            <li>Username: <input type="text" id='username' required></li>
            <li>Code will appear here:<BR><textarea id='code'></textarea></li>
            <li><input type="checkbox" id="alwaysShowPinyin"> I want to always see the pinyin. Don't gradually remove it as I learn more words.</li>
            <li><button id='submit' onClick="generateCodeSubmit()">Get bookmark code</button></li>
            <li>If you see code in the box above it has already been copied to your clipboard.</li>
            <li>Now, find the bookmark you saved and edit it. (Here's how to edit a bookmark in <a href="https://support.google.com/chrome/answer/188842">Chrome</a>,
                <a href="https://itstillworks.com/manage-safari-bookmarks-iphone-16680.html">Safari</a>, <a href="https://support.mozilla.org/en-US/kb/bookmarks-firefox">Firefox</a></li>
            <li>Paste the javascript code into the address or URL field, replacing the whole pinwean.com and everything
                else with the
                code from your email. Save the bookmark.</li>
            <li><a href="#use">Use it to read Chinese</a>. Here is a good website to try. <a target="_blank" href="https://www.jw.org/cmn-hans/">JW.org</a></li>
        </ol>

    </div>
    <script>
        $(document).on('click','#submit',function(){
            let username = document.getElementById('username').value;
            let email = document.getElementById('email').value;
            let alwaysShowPinyin = document.getElementById('alwaysShowPinyin').checked
            let code =
                'javascript:(function(un,pw,py,u,i){smpinyin=py;smusername=un;smpassword=pw;var d=document;if(!d.getElementById(i)){var s=d.createElement("script");s.src="https://dl.dropboxusercontent.com/s/6g09dguwgfdr1oq/slowmersion.js";s.id="slowmersion";d.body.appendChild(s);}}("` +
                username + '","' + email + '",'+ alwaysShowPinyin +'));';
            let textAreaCode = document.getElementById('code')
            textAreaCode.value = code;
            //debugger
            alert(
                "The javascript code has been copied to your clipboard. Go edit the bookmark and paste the code in, replacing everything in the address or URL field."
            );
            let form = document.getElementById("codeRequest")
            textAreaCode.select();
            document.execCommand('copy');   
        }
    </script>
</body>
